@tailwind base;
@tailwind components;
@tailwind utilities;

/* Essential Component Classes */
@layer components {
  /* Category Button */
  .category-btn {
    @apply w-full cursor-pointer flex flex-col gap-1 overflow-hidden rounded-2xl border-2 border-gray-300 p-4 text-left transition-all duration-200 relative;
    background: linear-gradient(145deg, #f1f6fb, #ffffff);
  }

  .category-btn:hover {
    @apply border-primary shadow-lg;
    transform: translateY(-3px);
    box-shadow: 0 6px 20px -6px rgba(35,87,137,0.35);
  }

  .category-title {
    @apply text-xl font-semibold text-blue-800;
  }

  .category-desc {
    @apply text-sm text-blue-600;
  }

  .high-score {
    @apply text-xs text-primary font-semibold px-2 py-1 rounded-lg mt-1 inline-block;
    background: rgba(35,87,137,0.1);
  }

  /* Card 3D System */
  .card-3d {
    perspective: 1200px;
    @apply relative w-full;
    height: 100vh;
    max-height: 800px;
    min-height: 600px;
  }

  .card-3d > .card-inner {
    transform-style: preserve-3d;
    transition: transform 700ms cubic-bezier(.2,.9,.2,1);
    @apply relative w-full h-full;
  }

  .card-3d.flipped > .card-inner {
    transform: rotateY(180deg);
  }

  .card-face {
    @apply w-full h-full absolute top-0 left-0 z-[2];
    transform-origin: center center;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    will-change: transform;
    pointer-events: auto;
  }

  .answer-section {
    transform: rotateY(180deg);
  }

  /* Card Backgrounds */
  .card-background {
    width: 100%;
    height: 100%;
    background-size: 100% 100%;
    background-position: center;
    background-repeat: no-repeat;
  }

  .question-bg {
    background-image: url('svg/syntax_q.svg');
  }

  .question-bg.grammar {
    background-image: url('svg/grammar_q.svg');
  }

  .answer-bg {
    background-image: url('svg/syntax_a.svg');
  }

  .answer-bg.grammar {
    background-image: url('svg/grammar_a.svg');
  }

  /* Content Areas - Precise positioning within SVG safe zones */
  .question-content {
    @apply absolute flex flex-col items-center;
    top: 40%;
    left: 10%;
    right: 10%;
    bottom: 15%;
    justify-content: space-between;
  }

  .answer-content {
    @apply absolute flex flex-col items-center justify-center;
    top: 30%;
    left: 10%;
    right: 10%;
    bottom: 20%;
  }

  .question-text-area {
    @apply bg-white bg-opacity-95 border border-blue-100 rounded-xl p-4 mb-8 text-center shadow-lg;
    max-width: 320px;
    font-size: 0.9rem;
    line-height: 1.4;
    color: #2c5aa0;
  }

  .answer-text-area {
    @apply bg-white bg-opacity-95 border border-blue-50 rounded-xl p-6 text-center shadow-xl;
    max-width: 360px;
  }

  /* Choice System */
  .choices-area {
    @apply w-full max-w-xs space-y-2;
  }

  .choice-button {
    @apply w-full bg-white bg-opacity-95 border border-blue-200 rounded-lg p-3 text-left text-sm font-medium text-blue-800 transition-all duration-200 cursor-pointer shadow-sm;
    min-height: 40px;
    backdrop-filter: blur(2px);
  }

  .choice-button:hover {
    @apply bg-blue-50 border-blue-300 shadow-md;
    transform: translateY(-1px);
  }

  .choice-button.selected {
    @apply bg-orange-50 border-orange-400 text-orange-800;
    box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
  }

  .choice-button.selected::after {
    content: '✓';
    @apply float-right font-bold text-orange-500;
  }

  .choice-button.correct {
    @apply bg-green-50 border-green-400 text-green-800;
  }

  .choice-button.wrong {
    @apply bg-red-50 border-red-400 text-red-800;
  }

  /* Answer Display */
  .result-status {
    @apply text-base font-semibold text-primary mb-2;
  }

  .result-status.correct {
    @apply text-green-700;
  }

  .result-status.wrong {
    @apply text-red-700;
  }

  .user-choice {
    @apply text-sm text-gray-600 mb-1;
  }

  .user-choice::before {
    content: "Η απάντησή σου: ";
    @apply font-medium text-primary;
  }

  .correct-answer {
    @apply text-sm text-green-700 mb-1;
  }

  .correct-answer::before {
    content: "Σωστή απάντηση: ";
    @apply font-medium;
  }

  .explanation {
    @apply text-xs text-gray-700 mt-2 pt-2;
    border-top: 1px solid rgba(44,90,160,0.1);
  }

  /* Gradient Components */
  .gradient-primary {
    background: linear-gradient(135deg, #235789, #1d466b);
  }

  .gradient-summary {
    background: linear-gradient(145deg, #ffffff, #f8fbff);
  }

  .gradient-gold {
    background: linear-gradient(135deg, #ffd700, #ffb300);
  }
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .card-3d {
    height: 80vh;
    min-height: 500px;
    max-height: 700px;
  }

  .card-background {
    background-size: 100% 100%;
  }

  /* Adjust content areas for mobile to maintain SVG alignment */
  .question-content {
    top: 35%;
    left: 8%;
    right: 8%;
    bottom: 12%;
  }

  .answer-content {
    top: 25%;
    left: 8%;
    right: 8%;
    bottom: 18%;
  }

  .question-text-area {
    font-size: 0.85rem;
    padding: 0.75rem;
  }

  .choice-button {
    font-size: 0.8rem;
    padding: 0.6rem;
    min-height: 35px;
  }

  .category-btn {
    @apply p-4 rounded-2xl;
  }

  .category-title {
    @apply text-lg;
  }

  .category-desc {
    @apply text-xs;
  }

  .high-score {
    @apply text-xs px-1.5 py-0.5;
  }
}

/* Utilities */
@layer utilities {
  .preserve-3d {
    transform-style: preserve-3d;
  }

  .perspective-1000 {
    perspective: 1000px;
  }
}