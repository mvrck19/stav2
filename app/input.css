@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom CSS variables for consistency with original design */
:root {
  --card-bg: white;
  --primary-color: #235789;
  --text-gray: #666;
  --border-radius: 15px;
  --spacing: 1rem;
}

/* Custom component classes that combine multiple Tailwind utilities */
@layer components {
  .btn-primary {
    @apply bg-primary text-white border-none rounded-lg px-8 py-2 text-base cursor-pointer min-h-[44px] transition-colors duration-150;
  }
  
  .btn-primary:hover {
    @apply bg-primary-dark;
  }
  
  .btn-primary:disabled {
    @apply bg-gray-300 cursor-not-allowed;
  }
  
  .category-btn {
    @apply w-full gradient-category border-2 border-border-light rounded-category p-4 px-5 pb-5 text-left cursor-pointer flex flex-col gap-1 transition-all duration-200 relative overflow-hidden;
  }
  
  .category-btn::after {
    content: "";
    @apply absolute inset-0 opacity-0 transition-opacity duration-300 pointer-events-none;
    background: radial-gradient(circle at 85% 20%, rgba(35,87,137,0.12), transparent 60%);
  }
  
  .category-btn:hover {
    @apply border-primary shadow-lg;
    transform: translateY(-3px);
    box-shadow: 0 6px 20px -6px rgba(35,87,137,0.35);
  }
  
  .category-btn:hover::after {
    @apply opacity-100;
  }
  
  .category-title {
    @apply text-xl font-semibold text-blue-800;
  }
  
  .category-desc {
    @apply text-sm leading-5 text-blue-600;
  }
  
  .high-score {
    @apply text-xs text-primary font-semibold px-2 py-1 rounded-lg mt-1 inline-block;
    background: rgba(35,87,137,0.1);
  }
  
  .card-3d {
    perspective: 1200px;
    @apply relative w-full min-h-[640px];
  }
  
  .card-3d > .card-inner {
    transform-style: preserve-3d;
    transition: transform 700ms cubic-bezier(.2,.9,.2,1);
    @apply relative w-full h-full;
  }
  
  .card-3d.flipped > .card-inner {
    transform: rotateY(180deg);
  }
  
  .card-face {
    @apply w-full h-full absolute top-0 left-0;
    transform-origin: center center;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    will-change: transform;
    @apply z-[2];
    pointer-events: auto;
  }
  
  .answer-section {
    transform: rotateY(180deg);
  }
  
  .gradient-primary {
    background: linear-gradient(135deg, #235789, #1d466b);
  }
  
  .gradient-category {
    background: linear-gradient(145deg, #f1f6fb, #ffffff);
  }
  
  .gradient-summary {
    background: linear-gradient(145deg, #ffffff, #f8fbff);
  }
  
  .gradient-gold {
    background: linear-gradient(135deg, #ffd700, #ffb300);
  }
}

/* Preserve 3D transforms and other complex CSS that Tailwind doesn't handle well */
@layer utilities {
  .preserve-3d {
    transform-style: preserve-3d;
  }
  
  .backface-hidden {
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }
  
  .perspective-1000 {
    perspective: 1000px;
  }
  
  .perspective-1200 {
    perspective: 1200px;
  }
}

/* Additional styles for card overlays and interactive elements */
@layer components {
  .card-text {
    @apply absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-4/5 max-w-md z-[12] pointer-events-none text-center;
  }
  
  .section-title {
    @apply m-0 mb-1.5 text-primary font-bold text-4xl leading-none tracking-wide;
    text-shadow: 0 1px 0 rgba(255,255,255,0.6);
  }
  
  .answer-content {
    @apply absolute left-1/2 transform -translate-x-1/2 w-4/5 max-w-sm z-[5] flex justify-center gap-3;
    bottom: 6%;
  }
  
  .text-area {
    @apply mx-auto mb-1 inline-block rounded-lg border border-[#2c5aa0]/15 bg-white/95 px-3 py-2 text-[0.85rem] font-medium leading-[1.3] text-[#2c5aa0] shadow-sm;
    box-shadow: 0 2px 8px rgba(44,90,160,0.08);
  }
  
  .input-area {
    @apply absolute left-1/2 transform -translate-x-1/2 w-4/5 max-w-sm z-[16] bg-white bg-opacity-95 p-3 rounded-lg flex flex-col items-stretch gap-2 shadow-lg;
    bottom: 6%;
  }
  
  .input-label {
    @apply text-text-gray text-sm mb-2 block bg-white bg-opacity-90 p-1 rounded;
  }
  
  .input-box {
    @apply w-full h-10 border-2 border-primary rounded px-4 text-base mb-4 bg-white bg-opacity-95 shadow-sm;
  }
  
  .submit-btn, .next-btn {
    @apply btn-primary;
  }

  .submit-btn, .next-btn {
    @apply absolute left-1/2 -translate-x-1/2 rounded-xl px-6 py-3 text-[0.9rem] font-semibold shadow-lg transition-all duration-200 ease-out;
    bottom: 3%;
    min-width: 120px;
    z-index: 30;
    box-shadow: 0 4px 12px rgba(35,87,137,0.3);
  }

  .submit-btn {
    display: none;
  }

  .next-btn {
    display: block;
  }

  .submit-btn:hover:not(:disabled), .next-btn:hover:not(:disabled) {
    @apply -translate-y-[2px];
    box-shadow: 0 6px 16px rgba(35,87,137,0.4);
  }

  .submit-btn:disabled, .next-btn:disabled {
    @apply bg-gray-300 text-gray-600 opacity-60;
    box-shadow: none;
    cursor: not-allowed;
  }

  .svg-foreign-body {
    @apply relative m-0 box-border h-full w-full overflow-hidden bg-transparent p-0 font-sans text-[14px];
  }

  .question-text {
    @apply absolute left-1/2 top-[45%] flex w-[70%] max-w-[280px] -translate-x-1/2 -translate-y-1/2 items-center justify-center text-center;
    z-index: 15;
  }

  .choices-area {
    @apply absolute left-1/2 flex w-[70%] max-w-[280px] -translate-x-1/2 flex-col gap-[3px] p-0 select-none;
    bottom: 8%;
    z-index: 20;
  }

  .choice-btn {
    @apply relative flex min-h-[26px] items-center rounded-[8px] border border-[#d0dce9] bg-white px-[10px] py-[6px] text-left text-[0.7rem] font-medium leading-[1.1] text-[#2c5aa0] transition-all duration-200 ease-out;
    background: linear-gradient(145deg, #f8fbff, #ffffff);
    box-shadow: 0 1px 3px rgba(44,90,160,0.04);
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }

  .choice-btn:not(:disabled):hover {
    @apply -translate-y-[2px];
    background: linear-gradient(145deg, #e8f2ff, #f0f8ff);
    border-color: #4a90e2;
    box-shadow: 0 4px 16px rgba(74,144,226,0.2);
  }

  .choice-btn:disabled {
    @apply cursor-default opacity-70;
  }

  .choice-btn.selected {
    @apply -translate-y-[2px] scale-[1.02];
    background: linear-gradient(145deg, #fff8e1, #fffde7);
    border-color: #ff9800;
    color: #e65100;
    box-shadow: 0 4px 16px rgba(255,152,0,0.3);
    animation: pulseSel 1.2s ease-in-out infinite;
  }

  .choice-btn.selected::after {
    content: '✓';
    @apply absolute right-4 text-[1.2rem] font-bold text-[#ff9800];
    top: 50%;
    transform: translateY(-50%);
  }

  .choice-btn.choice-correct {
    background: linear-gradient(145deg, #e8f5e8, #f0fff0) !important;
    border-color: #4caf50 !important;
    color: #2e7d32 !important;
    box-shadow: 0 4px 16px rgba(76,175,80,0.3) !important;
  }

  .choice-btn.choice-wrong {
    background: linear-gradient(145deg, #ffeaea, #fff5f5) !important;
    border-color: #f44336 !important;
    color: #c62828 !important;
    box-shadow: 0 4px 16px rgba(244,67,54,0.3) !important;
  }
  
  .prev-btn, .confirm-btn {
    @apply bg-blue-700 text-white border-none rounded px-6 py-2 text-sm cursor-pointer min-h-[40px] shadow-sm transition-all duration-150;
  }
  
  .prev-btn:hover:not(:disabled), .confirm-btn:hover:not(:disabled) {
    @apply bg-blue-800;
  }
  
  .prev-btn:disabled, .confirm-btn:disabled {
    @apply bg-gray-400 cursor-not-allowed;
  }
  
  .choice-actions {
    @apply absolute left-1/2 transform -translate-x-1/2 w-4/5 max-w-sm flex justify-center gap-2.5 z-[25];
    bottom: 2%;
  }
  
  /* Answer Card Styles for SVG Foreign Objects */
  .answer-container {
    @apply absolute left-1/2 top-[40%] -translate-x-1/2 -translate-y-1/2 w-[70%] max-w-[280px] flex flex-col gap-3 p-5;
    background: rgba(255,255,255,0.98);
    border: 1px solid rgba(44,90,160,0.15);
    border-radius: 12px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    z-index: 20;
    text-align: center;
  }

  .result-status {
    @apply text-base font-semibold text-[#2c5aa0] mb-2;
  }

  .result-status.correct {
    @apply text-[#2e7d32];
  }

  .result-status.incorrect {
    @apply text-[#c62828];
  }

  .user-choice {
    @apply text-[0.85rem] text-gray-600 mb-1;
  }

  .user-choice::before {
    content: "Η απάντησή σου: ";
    @apply font-medium text-[#2c5aa0];
  }

  .correct-answer {
    @apply text-[0.85rem] text-[#2e7d32] mb-1;
  }

  .correct-answer::before {
    content: "Σωστή απάντηση: ";
    @apply font-medium;
  }

  .explanation {
    @apply text-[0.8rem] text-gray-700 leading-[1.4] mt-2 pt-2;
    border-top: 1px solid rgba(44,90,160,0.1);
  }
}

@layer base {
  @keyframes pulseSel {
    0% {
      box-shadow: 0 4px 16px rgba(255,152,0,0.3), 0 0 0 0 rgba(255,152,0,0);
    }
    50% {
      box-shadow: 0 4px 16px rgba(255,152,0,0.3), 0 0 0 8px rgba(255,152,0,0.2);
    }
    100% {
      box-shadow: 0 4px 16px rgba(255,152,0,0.3), 0 0 0 0 rgba(255,152,0,0);
    }
  }
}

/* Mobile responsive adjustments */
@media (max-width: 768px) {
  .category-screen {
    @apply px-4 py-6 pb-8 mx-2 rounded-2xl;
  }
  
  .app-title {
    @apply text-3xl;
  }
  
  .category-btn {
    @apply p-4 rounded-2xl;
  }
  
  .category-title {
    @apply text-lg;
  }
  
  .category-desc {
    @apply text-xs;
  }
  
  .high-score {
    @apply text-xs px-1.5 py-0.5;
  }
  
  .card-text {
    @apply w-5/6 top-[45%];
  }
  
  .text-area {
    @apply text-base px-3.5 py-2.5 leading-6;
  }
  
  .input-area {
    @apply w-5/6 p-3.5;
    bottom: 4%;
  }
  
  .answer-content {
    @apply w-5/6 flex-col gap-2;
    bottom: 4%;
  }
  
  .choice-actions {
    @apply w-5/6;
    bottom: 1%;
  }
  
  .confirm-btn {
    @apply px-5 py-3 text-sm min-h-[48px];
  }
  
  .prev-btn, .next-btn {
    @apply min-h-[48px];
  }
  
  .prev-btn {
    @apply w-full p-3;
  }
  
  .progress-text {
    @apply text-xs px-2 py-1;
  }
  
  .summary-content {
    @apply px-6 py-8 pb-6 mx-4 w-[calc(100%-2rem)];
  }
  
  .summary-title {
    @apply text-xl;
  }
  
  .stat-item {
    @apply py-3 px-4 text-sm;
  }
  
  .stat-value {
    @apply text-base;
  }
  
  .summary-btn {
    @apply py-3 px-6 text-sm w-full;
  }
}